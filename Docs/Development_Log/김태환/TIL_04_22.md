# TIL 04.22

날짜: 2024년 4월 22일

### 일정

---

- 중간 발표 시청 (09:00 ~ 14:00)
- 라즈베리파이 환경 세팅 (14:00 ~ 14:20)
- 회의 (14:20 ~ 16:00)
    - 2차 교보재 신청, 신청품 최종 선정
    - 업무 분담 구체화
    - 하드웨어 설계도 최종 픽스
    
- UWB 파이썬 라이브러리 동작확인 (16:00 ~ 18:00)

### 라즈베리파이 환경 세팅

---

- Jetson Nano - Raspberry Pi간 UWB 모듈 통신 테스트 환경 구성
- 추후 Ubuntu 환경으로 이전 후 통신 테스트 재 진행 필요
- 팀에 할당된 공유기를 통해 Local 환경에서 개발 및 테스트
    - Local IP : 192.168.0.6

### 하드웨어 설계 수정

---

- 내부 배선 공간 확보 및 서보 모터 부착 방식 변경
- 상세 변경 사항은 도면 작성 완료 후 재 검토

### UWB 동작 확인

---

- DWM1000 - Rpi4 매핑
    
    
    | DWM1000 | Raspberry Pi |
    | --- | --- |
    | CLK | D23 (GPIO11) |
    | MISO | D21 (GPIO9) |
    | MOSI | D19 (GPIO10) |
    | CSN | D15 → D24 (GPIO8) |
    | RESET | GPIO23 |
    | IRQ | GPIO18 |
    | VCC | D17 |
    | GND | D9 |
    

- 테스트 코드
    
    [GitHub - pedestrian0423/DW1000_Raspi_Python_library: Python library for the DWM1000 ultra wide band modules](https://github.com/pedestrian0423/DW1000_Raspi_Python_library?tab=readme-ov-file)
    
    - DWM1000RangingAnchor.py 테스트
        - 에러1. monotonic
            - monotonic 기능이 time 라이브러리에 합쳐짐
            - 따라서, time 라이브러리로 변경
        - 에러2. DW1000.begin
            - DW1000.py 모듈 내부에 있는 DW1000 클래스 호출에 있어 에러 발생
            - 아래 코드 추가
                
                ```python
                # import DW1000 -> 아래로 변경
                from DW1000 import DW1000
                ```
                
            
        - 에러3. add_event_detect
            - RuntimeError: Failed to add edge detection 에러 발생
                - 시도 해결 방안1
                    - Pin 번호 수정
                        - PIN_IRQ = 19 → 17
                        - PIN_SS = 16 → 8 (Chip Enable 0)
                    - 효과 없음
                    
                - 시도 해결 방안2
                    
                    [](https://forums.raspberrypi.com/viewtopic.php?t=205327)
                    
                    - 아무 기능이 없는 GPIO 핀으로 변경 → 효과 없음
                    
                - 시도 해결 방안3
                    - sudo로 실행 → 효과 없음